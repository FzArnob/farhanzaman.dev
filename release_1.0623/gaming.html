<!DOCTYPE html>
<html>

<head>
  <title></title>
  <link href="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/runfzrun.png" rel="icon" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <link href="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/css/app.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <style>
    /* scrollbar design */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      border-radius: 9px;
      background: rgba(0, 0, 0, 0.1);
    }

    ::-webkit-scrollbar-thumb {
      background-image: linear-gradient(125deg, rgba(0, 0, 0, 0.2) 0%, #fcba03 100%);
      border-radius: 9px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background-image: linear-gradient(125deg, rgba(0, 0, 0, 0.3) 0%, #ca9400 100%);
    }

    /* Gaming page specific styles */
    .gaming-profile-row {
      width: 100%;
      position: relative;
      overflow: hidden;
      display: flex;
    }

    .background-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-position: top;
      object-fit: cover;
      filter: blur(8px);
    }

    .gaming-profile-row::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .videos-grid::-webkit-scrollbar {
      width: 8px;
    }

    .videos-grid::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 4px;
    }

    .videos-grid::-webkit-scrollbar-thumb {
      background: #fcba03;
      border-radius: 4px;
    }

    .videos-grid::-webkit-scrollbar-thumb:hover {
      background: #ffd700;
    }

    .video-item {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .video-item:hover {
      transform: translateY(-5px);
      border: 1px solid rgba(252, 186, 3, 0.8);
      box-shadow: 0 0 10px rgba(252, 186, 3, 0.3);
    }

    .profile-left-section {
      padding: 120px 20px 20px 40px;
      width: calc(50% - 60px);
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }

    .profile-right-section {
      padding: 120px 40px 20px 20px;
      width: calc(50% - 60px);
      position: relative;
      z-index: 1;
    }

    .profile-left-section>div {
      justify-content: flex-end;
    }

    .profile-left-section>p {
      text-align: right;
      max-width: 300px;
      margin: 0;
      display: block;
    }

    .profile-right-section>div {
      justify-content: left;
    }

    .platform-logos {
      padding-left: 25px;
      display: flex; 
      justify-content: left; 
      gap: 20px; 
      margin-top: 40px;
    }

    .video-thumbnail {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .discord-section {
      padding: 5px 30px;
      background: rgba(48, 48, 48, 0.7);
      margin-top: 20px;
      border-radius: 100px;
      box-shadow: 0 0 10px 5px rgba(252, 186, 3, 0.3) inset;
    }
    .discord-section > div {
        justify-content: left;
    }

    .discord-section:hover {
      box-shadow: 0 0 25px rgba(252, 186, 3, 0.8);
    }

    .video-info {
      padding: 15px;
    }

    .video-title {
      color: #fff;
      font-size: 14px;
      font-weight: bold;
      margin-bottom: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      line-clamp: 2;
      overflow: hidden;
    }

    .themeBtn:hover {
      color: #fff;
    }

    .video-date {
      color: #fcba03;
      font-size: 12px;
    }

    .fa-logo {
      width: 70px;
      height: 70px;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    @media (max-width: 880px) {
      .gaming-profile-row {
        flex-direction: column;
      }
      
      .discord-section {
        text-align: center !important;
        margin: 0px auto 0px auto;
      }
      .discord-section > div {
        justify-content: center;
      }
      .fa-logo {
        position: absolute;
        top: -15px;
        width: 40px;
        height: 40px;
      }
    
      .platform-logos {
        justify-content: center; 
        padding: 0px;
        margin-left: 0px;
      }
      .social-buttons {
        justify-content: center;
      }

      .videos-grid {
        grid-template-columns: 1fr;
      }
      .profile-right-section > div {
        justify-content: center;
      }
      .profile-left-section,
      .profile-right-section {
        width: 100% !important;
        margin-bottom: 20px;
        align-items: center;
      }

      .profile-left-section > div {
        justify-content: center;
      }
      .profile-left-section > p {
        max-width: 300px;
        text-align: center;
        margin: 0;
      }
      .profile-left-section {
        padding: 80px 0px 0px 0px;
        width: calc(100% - 40px);
        position: relative;
        z-index: 1;
      }

      .profile-right-section {
        padding: 0px 20px 20px 0px;
        width: calc(100% - 40px);
        position: relative;
        z-index: 1;
      }
    }

    .platform-logo>div {
      background: #fff;
    }

    .platform-logo:hover {
      transform: scale(1.1);
    }

    .platform-logo:hover>div {
      transform: translateY(-2px);
      box-shadow: 0 0 25px rgba(252, 186, 3, 0.8);
    }
  </style>
</head>

<body class="bg1">
  <button id="back-to-top-btn">
    <span class="ico-gen">
      H
    </span>
  </button>
  <pre-loader class="pre-loader">
    <img src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/runfzrun.png" />
  </pre-loader>
  <main-page class="bg1 c1 hidden">
    <div style="transition-duration: 0.2s;" class="navbar animate-left" id="navbar">
      <div class="nav-container">
        <a class="nav-logo c1 active" href="/"><img alt="logo" src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/runfzrun.png" class="fa-logo" />
          <span class="nav-corner bg2 animate-top"></span>
        </a>
      </div>
    </div>
    <div class="main-content">
      <!-- First Row: Profile Info and Social Links -->
      <div class="row gaming-profile-row">
        <video class="background-video" autoplay muted loop>
          <source src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/demo.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <div class="profile-left-section">
          <!-- Image and Name side by side -->
          <div style="display: flex; align-items: center; margin-bottom: 20px;">
            <img src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/runfzrun-dp.png" alt="Run Fz Run Profile" class="gaming-profile-img"
              style="width: 120px; height: 120px; border-radius: 50%; border: 2px solid #fcba03; margin-right: 15px;" />
            <h1 style="color: #fcba03; margin: 0; -webkit-text-fill-color: #fff;">Run Fz Run</h1>
          </div>
          <!-- Description below -->
          <p style="color: #fff; margin: 0; line-height: 1.6;">Gaming content creator sharing epic gaming moments,
            tutorials, and entertainment. Subscribe for the latest gaming videos!</p>
        </div>

        <div class="profile-right-section">
          <!-- Discord logo gif and animated text -->
          <div class="discord-section" style="text-align: center; cursor: pointer; max-width: fit-content;">
            <div style="display: flex; align-items: center; justify-content: left;">
              <img src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/discord.gif" alt="Discord" style="width: 80px; height: 80px; margin-right: 10px;" />
              <span class="wobble animate-infinite-tossing"
                style="color: #ffffff; font-weight: bold; font-size: 24px;">Join Now!</span>
            </div>
          </div>
          <!-- 3 Platform logos -->
          <div class="platform-logos">
            <a href="https://www.youtube.com/@runfzrun?sub_confirmation=1" target="_blank" class="platform-logo"
              style="display: inline-block; transition: transform 0.3s;">
              <div
                style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <span class="material-icons" style="color: #ff0000; font-size: 70px;">play_circle_filled</span>
              </div>
            </a>
            <a href="https://www.facebook.com/runfzrun" target="_blank" class="platform-logo"
              style="display: inline-block; transition: transform 0.3s;">
              <div
                style="width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <span class="material-icons" style="color: #1877f2; font-size: 70px;">facebook</span>
              </div>
            </a>
            <a href="https://www.tiktok.com/@runfzrun" target="_blank" class="platform-logo"
              style="display: inline-block; transition: transform 0.3s;">
              <div
                style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <span class="material-icons"
                  style="background: linear-gradient(135deg, #ff0050 0%, #00f2ea 100%); color: #fff; padding: 7px; border-radius: 50%; font-size: 45px; font-weight: 300;">tiktok</span>
              </div>
            </a>
          </div>
        </div>
        <div
          style="z-index: 2; height: 200px; width: 100%; background: linear-gradient(to bottom, rgba(37, 37, 37, 0) 0%, rgb(37, 37, 37) 100%);">
        </div>
      </div>

      <!-- Second Row: YouTube Videos Grid -->
      <div class="row gaming-videos-row">
        <div class="col-sm-12">
          <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 10px;">
            <div id="video-sort-btns"
              style="background: rgba(0,0,0,0.3); border-radius: 30px; padding: 6px 16px; display: flex; gap: 10px; box-shadow: 0 2px 8px rgba(252,186,3,0.08);">
              <button class="sort-btn active" data-type="all"
                style="background: none; border: none; color: #fcba03; font-weight: bold; font-size: 15px; border-radius: 20px; padding: 6px 16px; cursor: pointer;">All</button>
              <button class="sort-btn" data-type="video"
                style="background: none; border: none; color: #fff; font-size: 15px; border-radius: 20px; padding: 6px 16px; cursor: pointer;">Videos</button>
              <button class="sort-btn" data-type="short"
                style="background: none; border: none; color: #fff; font-size: 15px; border-radius: 20px; padding: 6px 16px; cursor: pointer;">Shorts</button>
              <button class="sort-btn" data-type="stream"
                style="background: none; border: none; color: #fff; font-size: 15px; border-radius: 20px; padding: 6px 16px; cursor: pointer;">Streams</button>
            </div>
          </div>
          <div class="videos-grid" id="youtube-videos-grid"
            style="padding-top: 20px; padding-bottom: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; border-radius: 10px; min-height: 400px;">
            <!-- Skeletons will be loaded dynamically -->
          </div>
        </div>
      </div>

      <footer>
        <div class="container">

          <div class="row">
            <div class="col-sm-12">
              <div class="copyright-box">
                <p class="copyright">&copy; Copyright <strong>farhanzaman.dev</strong>. All Rights Reserved</p>
                <div class="credits">
                  Designed by <a href="/about" id="footer_name"
                    style="background-color: rgba(0,0,0, 0.2); color: #fcba03; border-radius: 3px; padding: 0px 10px 2px 10px;"></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </main-page>
  <script src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/js/profile_data.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/js/gaming_yt_data.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/js/lib.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/js/util.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/js/sync_info.js"></script>
  <script>
    document.title = 'Run Fz Run';
    document.getElementById('footer_name').innerHTML = result.profile.info.full_name;

    // --- Skeleton Loader ---
    function renderSkeletons(count = 8) {
      const grid = document.getElementById('youtube-videos-grid');
      grid.innerHTML = '';
      for (let i = 0; i < count; i++) {
        const skeleton = document.createElement('div');
        skeleton.className = 'video-item skeleton-item';
        skeleton.setAttribute('data-skeleton', 'true');
        skeleton.innerHTML = `
          <div style="width: 100%; height: 180px; background: linear-gradient(90deg, #222 25%, #333 50%, #222 75%); background-size: 200% 100%; animation: skeleton-loading 1.2s infinite linear; border-radius: 10px;"></div>
          <div class="video-info">
            <div style="width: 70%; height: 18px; background: #333; border-radius: 4px; margin-bottom: 8px; animation: skeleton-loading 1.2s infinite linear;"></div>
            <div style="width: 40%; height: 12px; background: #333; border-radius: 4px; margin-bottom: 6px; animation: skeleton-loading 1.2s infinite linear;"></div>
            <div style="width: 60%; height: 10px; background: #333; border-radius: 4px; animation: skeleton-loading 1.2s infinite linear;"></div>
          </div>
        `;
        grid.appendChild(skeleton);
      }
    }

    // --- Infinite Scroll and Sorting ---
    let allVideos = [];
    let filteredVideos = [];
    let currentPage = 0;
    let isLoading = false;
    let pageSize = 12;
    let sortType = 'all';

    function flattenAndSortVideos() {
      if (typeof gamingYouTubeData !== 'undefined' && gamingYouTubeData.pages && gamingYouTubeData.pages.length > 0) {
        let vids = [];
        gamingYouTubeData.pages.forEach(page => {
          if (page.videos) vids = vids.concat(page.videos);
        });
        vids.sort((a, b) => new Date(b.video_publishTime) - new Date(a.video_publishTime));
        allVideos = vids;
      } else {
        allVideos = [];
      }
    }

    function filterVideos(type) {
      if (type === 'all') return allVideos;
      if (type === 'video') return allVideos.filter(v => !v.video_type || v.video_type === 'video');
      return allVideos.filter(v => v.video_type === type);
    }

    function addSkeletons(count = 4) {
      const grid = document.getElementById('youtube-videos-grid');
      for (let i = 0; i < count; i++) {
        const skeleton = document.createElement('div');
        skeleton.className = 'video-item skeleton-item';
        skeleton.innerHTML = `
          <div style="width: 100%; height: 180px; background: linear-gradient(90deg, #222 25%, #333 50%, #222 75%); background-size: 200% 100%; animation: skeleton-loading 1.2s infinite linear; border-radius: 10px;"></div>
          <div class="video-info">
            <div style="width: 70%; height: 18px; background: #333; border-radius: 4px; margin-bottom: 8px; animation: skeleton-loading 1.2s infinite linear;"></div>
            <div style="width: 40%; height: 12px; background: #333; border-radius: 4px; margin-bottom: 6px; animation: skeleton-loading 1.2s infinite linear;"></div>
            <div style="width: 60%; height: 10px; background: #333; border-radius: 4px; animation: skeleton-loading 1.2s infinite linear;"></div>
          </div>
        `;
        grid.appendChild(skeleton);
      }
    }

    function removeSkeletons() {
      const skeletons = document.querySelectorAll('.skeleton-item');
      skeletons.forEach(skeleton => skeleton.remove());
    }

    function loadNextPage() {
      if (isLoading) return;
      const start = currentPage * pageSize;
      const end = start + pageSize;

      // Check if there are more videos to load
      if (start >= filteredVideos.length) return;

      isLoading = true;

      // Find skeletons in the grid
      const grid = document.getElementById('youtube-videos-grid');
      let skeletons = Array.from(grid.querySelectorAll('[data-skeleton="true"]'));
      // If not enough skeletons, add more
      const needed = Math.max(0, (end - start) - skeletons.length);
      for (let i = 0; i < needed; i++) {
        const skeleton = document.createElement('div');
        skeleton.className = 'video-item skeleton-item';
        skeleton.setAttribute('data-skeleton', 'true');
        skeleton.innerHTML = `
          <div style="width: 100%; height: 180px; background: linear-gradient(90deg, #222 25%, #333 50%, #222 75%); background-size: 200% 100%; animation: skeleton-loading 1.2s infinite linear; border-radius: 10px;"></div>
          <div class="video-info">
            <div style="width: 70%; height: 18px; background: #333; border-radius: 4px; margin-bottom: 8px; animation: skeleton-loading 1.2s infinite linear;"></div>
            <div style="width: 40%; height: 12px; background: #333; border-radius: 4px; margin-bottom: 6px; animation: skeleton-loading 1.2s infinite linear;"></div>
            <div style="width: 60%; height: 10px; background: #333; border-radius: 4px; animation: skeleton-loading 1.2s infinite linear;"></div>
          </div>
        `;
        grid.appendChild(skeleton);
        skeletons.push(skeleton);
      }

      setTimeout(() => {
        const videosToShow = filteredVideos.slice(start, end);
        // Replace skeletons in-place with video content
        for (let i = 0; i < videosToShow.length; i++) {
          const video = videosToShow[i];
          const skeleton = skeletons[i];
          if (!skeleton) continue;
          skeleton.removeAttribute('data-skeleton');
          skeleton.classList.remove('skeleton-item');
          const publishDate = new Date(video.video_publishTime);
          const now = new Date();
          const diffTime = Math.abs(now - publishDate);
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
          let dateString;
          if (diffDays === 1) {
            dateString = '1 day ago';
          } else if (diffDays < 7) {
            dateString = `${diffDays} days ago`;
          } else if (diffDays < 30) {
            const weeks = Math.floor(diffDays / 7);
            dateString = weeks === 1 ? '1 week ago' : `${weeks} weeks ago`;
          } else if (diffDays < 365) {
            const months = Math.floor(diffDays / 30);
            dateString = months === 1 ? '1 month ago' : `${months} months ago`;
          } else {
            const years = Math.floor(diffDays / 365);
            dateString = years === 1 ? '1 year ago' : `${years} years ago`;
          }
          let typeBadge = '';
          if (video.video_type === 'short') {
            typeBadge = '<span style="background: #ff4444; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin-left: 5px;">SHORT</span>';
          } else if (video.video_type === 'stream') {
            typeBadge = '<span style="background: #ff0000; color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin-left: 5px;">LIVE</span>';
          }
          skeleton.innerHTML = `
            <a href="${video.video_url}" target="_blank" style="text-decoration: none;">
              <img src="${video.video_thumbnail}" alt="${video.video_title}" class="video-thumbnail" />
              <div class="video-info">
                <div class="video-title">${video.video_title}${typeBadge}</div>
                <div class="video-date">${dateString}</div>
                <div style="color: #aaa; font-size: 11px; margin-top: 4px;">
                  ${video.video_view_count.toLocaleString()} views • ${video.video_like_count.toLocaleString()} likes
                </div>
              </div>
            </a>
          `;
        }
        // Hide any extra skeletons
        for (let i = videosToShow.length; i < skeletons.length; i++) {
          skeletons[i].style.display = 'none';
        }
        isLoading = false;
        currentPage++;

        // --- NEW: Check if more should be loaded (user is still at bottom) ---
        const rect = grid.getBoundingClientRect();
        const atBottom = (window.innerHeight + window.scrollY >= rect.top + window.scrollY + grid.offsetHeight - 300);
        if (atBottom && (currentPage * pageSize < filteredVideos.length)) {
          loadNextPage();
        }
      }, 600);
    }

    function handleScroll() {
      const grid = document.getElementById('youtube-videos-grid');
      const rect = grid.getBoundingClientRect();
      if (window.innerHeight + window.scrollY >= rect.top + window.scrollY + grid.offsetHeight - 300) {
        // If more pages available
        if ((currentPage) * pageSize < filteredVideos.length && !isLoading) {
          loadNextPage();
        }
      }
    }

    function setupSortButtons() {
      const btns = document.querySelectorAll('#video-sort-btns .sort-btn');
      btns.forEach(btn => {
        btn.addEventListener('click', function () {
          btns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          sortType = btn.getAttribute('data-type');
          filteredVideos = filterVideos(sortType);
          currentPage = 0;

          // Clear grid and start fresh
          const grid = document.getElementById('youtube-videos-grid');
          grid.innerHTML = '';

          // Load first page
          loadNextPage();
        });
      });
    }

    // --- Main Loader ---
    document.addEventListener("DOMContentLoaded", function () {
      const titillium = new FontFace('titillium-font', 'url(https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/TitilliumWeb-Regular.ttf)');
      const icons = new FontFace('icons-font', 'url(https://cdn.jsdelivr.net/gh/FzArnob/farhanzaman.dev@main/release_1.0623/view/static/icons.ttf)');
      const fonts = [titillium.load(), icons.load()];
      Promise.all(fonts).then(() => {
        setTimeout(function () {
          document.querySelector("pre-loader").style.display = "none";
          document.querySelector("main-page").style.display = "block";
          wobbleAnimation();
          // --- Video grid logic ---
          renderSkeletons(8);
          flattenAndSortVideos();
          filteredVideos = filterVideos(sortType);
          currentPage = 0;

          setTimeout(() => {
            loadNextPage();
          }, 1000);

          window.addEventListener('scroll', handleScroll);
          setupSortButtons();
          synchronizePage("gaming");
        }, 1000);
      }).catch((error) => {
        console.error('Font loading failed:', error);
      });
    });

    // --- Skeleton loading animation ---
    const style = document.createElement('style');
    style.innerHTML = `
      @keyframes skeleton-loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }
      .sort-btn.active {
        background: #fcba03 !important;
        color: #222 !important;
        font-weight: bold;
      }
    `;
    document.head.appendChild(style);
  </script>

</body>

</html>
